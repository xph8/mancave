#!/usr/bin/env sh

set -eufo pipefail

echo "ï€“ configuring vscode"

# generated by `code --list-extensions`
declare -a extensions=(
    # theme
    alexanderte.dainty-nord-vscode
    PKief.material-icon-theme

    # languages
    ms-python.python
    ms-toolsai.jupyter
    ms-python.isort
    ms-python.black-formatter

    golang.go

    redhat.vscode-yaml
    redhat.vscode-xml
    tamasfe.even-better-toml
    yzhang.markdown-all-in-one

    # infrastructure
    ms-azuretools.vscode-docker
    ms-vscode-remote.remote-containers
    ms-kubernetes-tools.vscode-kubernetes-tools
    4ops.terraform
    redhat.ansible

    # utils
    alefragnani.Bookmarks
    anseki.vscode-color

    eamodio.gitlens
    ms-vscode.makefile-tools
    42Crunch.vscode-openapi

    {{- if eq .chezmoi.os "darwin" }}
    GitHub.copilot
    {{- end }}
)

{{- if eq .chezmoi.os "linux" }}
alias code="flatpak run com.visualstudio.code"
{{- end }}

for extension in "${extensions[@]}"; do
    code --force --install-extension $extension
done
