#!/usr/bin/env sh

{{- if ne .chezmoi.os "linux" }}
exit 0
{{- end }}

set -eufo pipefail

echo "ï€“ configuring dnf packages"

declare -a packages=(

    # development environment
    alacritty
    kind
    clang gcc rustup
    uv
    git gh git-delta
    tmux
    httpie
    protobuf-compiler protobuf-devel

    # infrastrucutre
    podman podman-compose
    distrobox
    vagrant
    ollama

    # terminal tools
    alacritty
    fastfetch cowsay
    micro neovim
    btop  # resource monitor
    bat ripgrep fd-find fzf  # file utils
    jq  # json processor
    wl-clipboard  # wayland clipboard
    make go-task
    mpd mpc ncmpcpp
    cava beets  # media
    zathura zathura-plugins-all zathura-zsh-completion  # document viewer
    pandoc  # document converter
    hyperfine  # benchmark
    lnav  # log navigator
    irssi  # chat client

    # de
    plasma-browser-integration

    # utils
    yt-dlp
    ffmpeg
    fdupes
    perl-Image-ExifTool
    ImageMagick

    # network tools
    rsync
    fping
    bind

    # kde applications
    marble  # atlas
    kalzium  # periodic table
    cantor  # graphs
    kmahjongg kajongg  # mahjongg

    # software
    firefox
    steam
    discord
)

sudo dnf upgrade --refresh -y

for package in "${packages[@]}"; do
    if ! dnf list installed $package | grep "Installed"; then
        sudo dnf install -y $package
    fi
done

sudo dnf copr enable -y lihaohong/yazi
sudo dnf install -y yazi
